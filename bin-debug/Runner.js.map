{"version":3,"file":"Runner.js","sourceRoot":"","sources":["../src/Runner.ts"],"names":[],"mappings":"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","sourcesContent":["class Runner extends egret.DisplayObjectContainer {\r\n    public static POWER = 120;\r\n    public static FLIGHT_TIME = 360;\r\n\r\n    public static CHARACTER_WIDTH = 70;\r\n    public static CHARACTER_HEIGHT = 220;\r\n\r\n    public static STATE: RUNNER_STATE;\r\n\r\n    public sprite: egret.MovieClip;\r\n\r\n    constructor() {\r\n        super();\r\n        this.createSprite();\r\n        this.addEvent();\r\n    }\r\n\r\n    private addEvent() {\r\n        SceneManager.mainScene.stage.addEventListener(egret.TouchEvent.TOUCH_TAP, this.jump, this);\r\n\r\n        SceneManager.mainScene.event.addEventListener(\"COLLISION\", this.die, this);\r\n    }\r\n\r\n    private createSprite() {\r\n        this.sprite = SceneManager.loader.createMovieClip(\"runner_json\", \"runner_png\", \"run\");\r\n        this.sprite.gotoAndPlay(\"run\", -1);\r\n\r\n        this.sprite.y = SceneManager.mainScene.floor.image.y - this.sprite.height;\r\n\r\n        this.addChild(this.sprite);\r\n    }\r\n\r\n    private jump() {\r\n        if (Runner.STATE == RUNNER_STATE.DIE) return;\r\n        if (Runner.STATE == RUNNER_STATE.JUMP) return;\r\n        Runner.STATE = RUNNER_STATE.JUMP;\r\n\r\n        const originY = this.sprite.y;\r\n\r\n        let tween = egret.Tween.get(this.sprite);\r\n        tween.to({ x: this.sprite.x, y: this.sprite.y - Runner.POWER }, Runner.FLIGHT_TIME)\r\n            .wait(Runner.FLIGHT_TIME)\r\n            .to({ y: originY }, Runner.FLIGHT_TIME)\r\n            .call(this.run, this);\r\n    }\r\n\r\n    private die() {\r\n        if (Runner.STATE == RUNNER_STATE.DIE) return;\r\n\r\n        Runner.STATE = RUNNER_STATE.DIE;\r\n        let tween = egret.Tween.get(this.sprite);\r\n        tween.to({ x: this.sprite.x + Runner.POWER, y: 512 + Runner.POWER }, Runner.FLIGHT_TIME);\r\n    }\r\n\r\n    private run() {\r\n        Runner.STATE = RUNNER_STATE.RUN;\r\n    }\r\n}\r\n\r\nenum RUNNER_STATE {\r\n    RUN,\r\n    JUMP,\r\n    DIE\r\n}"]}